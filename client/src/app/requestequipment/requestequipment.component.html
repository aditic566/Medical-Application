<div class="request-container">
    <h2>Request Equipment</h2>
 
    <form [formGroup]="itemForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
            <label for="hospitalId">Select Hospital</label>
            <select id="hospitalId" formControlName="hospitalId" class="form-control" (change)="onHospitalSelect()">
                <option value="">Select a hospital</option>
                <option *ngFor="let hospital of hospitalList" [value]="hospital.id">
                    {{ hospital.name }}
                </option>
            </select>
            <div *ngIf="itemForm.get('hospitalId')?.errors?.['required'] && itemForm.get('hospitalId')?.touched"
                class="error">
                Hospital is required
            </div>
        </div>
 
        <div class="form-group">
            <label for="equipmentId">Select Equipment</label>
            <select id="equipmentId" formControlName="equipmentId" class="form-control"
                [disabled]="!itemForm.get('hospitalId')?.value">
                <option value="">Select equipment</option>
                <option *ngFor="let item of equipmentList" [value]="item.id">
                    {{ item.name }}
                </option>
            </select>
            <div *ngIf="itemForm.get('equipmentId')?.errors?.['required'] && itemForm.get('equipmentId')?.touched"
                class="error">
                Equipment is required
            </div>
        </div>
 
        <div class="form-group">
            <label for="quantity">Quantity</label>
            <input type="number" id="quantity" formControlName="quantity" class="form-control" min="1">
            <div *ngIf="itemForm.get('quantity')?.errors?.['required'] && itemForm.get('quantity')?.touched"
                class="error">
                Quantity is required
            </div>
            <div *ngIf="itemForm.get('quantity')?.errors?.['min'] && itemForm.get('quantity')?.touched" class="error">
                Quantity must be at least 1
            </div>
        </div>
 
        <div class="form-group">
            <label for="orderDate">Order Date</label>
            <input type="date" id="orderDate" formControlName="orderDate" class="form-control">
            <div *ngIf="itemForm.get('orderDate')?.errors?.['required'] && itemForm.get('orderDate')?.touched"
                class="error">
                Order date is required
            </div>
            <div *ngIf="itemForm.get('orderDate')?.errors?.['invalidDate'] && itemForm.get('orderDate')?.touched"
                class="error">
                Invalid date format. Please use YYYY-MM-DD.
            </div>
        </div>
 
        <div class="form-group">
            <label for="status">Status</label>
            <select id="status" formControlName="status" class="form-control">
                <option value="PENDING">Pending</option>
                <option value="SHIPPED">Shipped</option>
                <option value="DELIVERED">Delivered</option>
            </select>
            <div *ngIf="itemForm.get('status')?.errors?.['required'] && itemForm.get('status')?.touched"
                class="error">
                Status is required
            </div>
        </div>
 
        <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" formControlName="description" class="form-control" rows="3"
                placeholder="Enter any additional details or requirements"></textarea>
            <div *ngIf="itemForm.get('description')?.errors?.['required'] && itemForm.get('description')?.touched"
                class="error">
                Description is required
            </div>
        </div>
 
        <div *ngIf="errorMessage" class="alert alert-danger">
            {{ errorMessage }}
        </div>
 
        <div *ngIf="responseMessage" class="alert alert-success">
            {{ responseMessage }}
        </div>
 
        <button type="submit" [disabled]="!itemForm.valid">Submit Request</button>
    </form>
</div>
 
 